# 紫微智控 · 项目自动创建指南

> 每个任务自动在 GitHub 和 Gitee 创建新项目

---

## 🎯 功能说明

运行一个命令，自动完成：
1. ✅ 在 GitHub 创建私有仓库
2. ✅ 在 Gitee 创建私有仓库
3. ✅ 生成本地项目文档
4. ✅ 生成同步报告

---

## 📋 使用方法

### 基本用法

```bash
cd /home/admin/Ziwei
bash scripts/create-project.sh <任务 ID> "任务名称" "任务描述"
```

### 示例

```bash
# 示例 1: 创建计算器项目
bash scripts/create-project.sh TASK-20250227-001 "Python 计算器" "创建一个命令行计算器"

# 示例 2: 创建网站项目
bash scripts/create-project.sh TASK-20250228-001 "电商网站" "React 电商网站前端"

# 示例 3: 创建数据分析项目
bash scripts/create-project.sh TASK-20250301-001 "销售数据分析" "Python 数据分析脚本"
```

---

## 📦 创建后得到什么

### 1. GitHub 仓库

```
https://github.com/ziwei-control/TASK-20250227-001
```
- ✅ 私有仓库
- ✅ 已初始化 README
- ✅ 自动添加描述

### 2. Gitee 仓库

```
https://gitee.com/pandac0/TASK-20250227-001
```
- ✅ 私有仓库
- ✅ 已初始化 README
- ✅ 自动添加描述

### 3. 本地项目目录

```
/home/admin/Ziwei/projects/TASK-20250227-001/
├── README.md          # 项目说明
├── docs/              # 文档（待创建）
├── src/               # 源代码（待创建）
├── tests/             # 测试（待创建）
└── output/            # 输出（待创建）
```

### 4. 同步报告

```
/home/admin/Ziwei/data/logs/project_create_20250227_123456.md
```

---

## 🔧 配置要求

### GitHub

- ✅ 已配置 Token（`.env` 中的 `GITHUB_TOKEN`）
- ✅ Token 有创建仓库权限

### Gitee

- ✅ 已配置 Token（`.env` 中的 `GITEE_TOKEN`）
- ✅ Token 有创建仓库权限
- ⚠️ 可选：不配置则只创建 GitHub 仓库

---

## 📊 完整工作流程

```
1. 运行创建脚本
   ↓
2. 调用 GitHub API 创建仓库
   ↓
3. 调用 Gitee API 创建仓库
   ↓
4. 生成本地项目文档
   ↓
5. 生成同步报告
   ↓
6. 开始项目开发
   ↓
7. 紫微智控自动处理任务
   ↓
8. 自动同步到双平台
```

---

## 🎯 使用场景

### 场景 1: 新客户项目

```bash
bash scripts/create-project.sh TASK-20250227-001 "客户 A 网站" "企业官网开发"
```

### 场景 2: 内部工具

```bash
bash scripts/create-project.sh TASK-20250228-001 "日志分析工具" "自动化日志分析脚本"
```

### 场景 3: 产品化项目

```bash
bash scripts/create-project.sh TASK-20250301-001 "SaaS 登录组件" "可复用的登录认证组件"
```

---

## 📝 项目命名规范

### 任务 ID 格式

```
TASK-YYYYMMDD-序号
```

示例：
- `TASK-20250227-001`
- `TASK-20250228-002`
- `TASK-20250301-001`

### 仓库名称

自动转换为小写，仅保留字母数字和连字符：
- `TASK-20250227-001` → `task-20250227-001`

---

## 🔍 查看项目列表

### 本地项目

```bash
ls -la /home/admin/Ziwei/projects/
```

### GitHub 仓库

```bash
curl -s https://api.github.com/users/ziwei-control/repos | grep "\"name\""
```

### Gitee 仓库

```bash
curl -s "https://gitee.com/api/v5/users/pandac0/repos" | grep "\"name\""
```

---

## ⚠️ 注意事项

### 1. Token 权限

确保 Token 有以下权限：
- GitHub: `repo` (完全控制私有仓库)
- Gitee: `projects` (创建和管理项目)

### 2. 仓库数量限制

- GitHub: 免费账户无限私有仓库
- Gitee: 免费账户有限制（检查账户等级）

### 3. 仓库命名

- 不能重复
- 只能包含小写字母、数字、连字符
- 不能以连字符开头或结尾

### 4. 自动初始化

- 每个仓库自动创建 README.md
- 方便后续 git clone 和 push

---

## 📋 故障排查

### 问题 1: GitHub 创建失败

**检查**:
```bash
# 验证 Token
curl -H "Authorization: token YOUR_TOKEN" https://api.github.com/user
```

**解决**:
- 检查 Token 是否有效
- 检查 Token 权限

### 问题 2: Gitee 创建失败

**检查**:
```bash
# 验证 Token
curl "https://gitee.com/api/v5/user?access_token=YOUR_TOKEN"
```

**解决**:
- 检查 Token 是否有效
- 检查 Gitee 账户等级

### 问题 3: 仓库已存在

**现象**: 提示 "already exists"

**解决**:
- 使用不同的任务 ID
- 或删除已有仓库

---

## 🔗 相关文档

- [[双平台同步说明]] - 自动同步功能
- [[Gitee 配置指南]] - Gitee Token 配置
- [[自动同步功能说明]] - 巡查和定时同步

---

**每个任务一个项目，自动创建，自动同步！** 🚀
