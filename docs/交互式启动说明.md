# 紫微智控 · 交互式启动说明

> 无需切换目录，交互式输入，更人性化！

---

## ✅ 功能更新

### 改进 1: 自动定位目录

**之前**:
```bash
cd /home/admin/Ziwei  # 必须手动切换
bash scripts/run-task.sh ...
```

**现在**:
```bash
# 在任何目录都能执行！
~$ bash /home/admin/Ziwei/scripts/run-task.sh
/tmp$ bash /home/admin/Ziwei/scripts/run-task.sh
# 脚本自动定位到 Ziwei 目录
```

---

### 改进 2: 交互式输入

**之前**:
```bash
# 必须一次性输入所有参数
bash scripts/run-task.sh TASK-20250227-001 "计算器项目" "创建一个计算器"
```

**现在**:
```bash
# 运行脚本后，逐步提示输入
bash scripts/run-task.sh

# 屏幕提示：
[1/3] 请输入任务 ID:
  任务 ID: TASK-20250227-001

[2/3] 请输入任务名称:
  任务名称：Python 计算器

[3/3] 请输入任务描述:
  任务描述：创建一个命令行计算器
```

---

## 📋 使用方法

### 方式 1: 交互式输入（推荐，新手友好）

```bash
# 运行脚本
bash /home/admin/Ziwei/scripts/run-task.sh

# 按提示逐步输入
[1/3] 请输入任务 ID:
  格式：TASK-日期 - 序号（例如：TASK-20250227-001）
  任务 ID: TASK-20250227-001

[2/3] 请输入任务名称:
  例如：计算器项目、电商网站、数据分析脚本
  任务名称：Python 计算器

[3/3] 请输入任务描述:
  详细描述任务需求（可选，直接回车跳过）
  任务描述：创建一个命令行计算器

# 确认后自动执行所有步骤
```

**优点**:
- ✅ 有格式提示
- ✅ 逐步引导
- ✅ 可以跳过描述
- ✅ 不容易出错

---

### 方式 2: 命令行参数（快速模式，老手推荐）

```bash
bash scripts/run-task.sh <任务 ID> "任务名称" "任务描述"
```

**示例**:
```bash
bash scripts/run-task.sh TASK-20250227-001 "Python 计算器" "创建一个命令行计算器"
```

**优点**:
- ✅ 快速
- ✅ 可脚本化
- ✅ 适合批量操作

---

## 🎯 使用场景

### 场景 1: 创建单个任务（交互式）

```bash
# 运行脚本
bash /home/admin/Ziwei/scripts/run-task.sh

# 输入任务 ID
TASK-20250227-001

# 输入任务名称
Python 计算器

# 输入任务描述
创建一个命令行计算器，支持加减乘除运算

# 自动执行所有步骤
```

### 场景 2: 快速创建任务（命令行）

```bash
bash scripts/run-task.sh TASK-20250228-002 "电商网站" "React 电商网站前端"
```

### 场景 3: 在任何目录执行

```bash
# 在家里目录
~$ bash /home/admin/Ziwei/scripts/run-task.sh

# 在临时目录
/tmp$ bash /home/admin/Ziwei/scripts/run-task.sh

# 在项目目录
/projects$ bash /home/admin/Ziwei/scripts/run-task.sh

# 都可以！脚本自动定位
```

---

## 📝 输入格式说明

### 任务 ID 格式

**格式**: `TASK-日期 - 序号`

**示例**:
- `TASK-20250227-001`
- `TASK-20250228-002`
- `TASK-20250301-001`

**说明**:
- `TASK-`: 固定前缀
- `日期`: YYYYMMDD 格式
- `序号`: 3 位数字（001-999）

### 任务名称

**要求**: 简洁明了

**示例**:
- `Python 计算器`
- `React 电商网站`
- `数据分析脚本`

### 任务描述

**要求**: 详细描述需求

**示例**:
- `创建一个命令行计算器，支持加减乘除运算`
- `完整的电商网站前端，包含商品列表、购物车、结算功能`
- `Python 数据分析脚本，读取 Excel 生成报表和图表`

**可选**: 可以直接回车跳过，使用默认描述

---

## 🔄 完整流程示例

### 交互式输入完整流程

```bash
$ bash /home/admin/Ziwei/scripts/run-task.sh

╔════════════════════════════════════════════════════════╗
║          紫微智控 - 一键启动任务                       ║
╚════════════════════════════════════════════════════════╝

[1/3] 请输入任务 ID:
  格式：TASK-日期 - 序号（例如：TASK-20250227-001）
  任务 ID: TASK-20250227-001

[2/3] 请输入任务名称:
  例如：计算器项目、电商网站、数据分析脚本
  任务名称：Python 计算器

[3/3] 请输入任务描述:
  详细描述任务需求（可选，直接回车跳过）
  任务描述：创建一个命令行计算器，支持加减乘除

╔════════════════════════════════════════════════════════╗
║          紫微智控 - 一键启动任务                       ║
╚════════════════════════════════════════════════════════╝

任务信息:
  ID: TASK-20250227-001
  名称：Python 计算器
  描述：创建一个命令行计算器，支持加减乘除
  仓库：task-20250227-001

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[步骤 1/6] 创建项目（GitHub + Gitee）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ✓ GitHub 仓库创建成功
  ✓ Gitee 仓库创建成功

✓ 步骤 1 完成：项目已创建

...（后续步骤自动执行）

╔════════════════════════════════════════════════════════╗
║              ✅ 任务启动完成！                         ║
╚════════════════════════════════════════════════════════╝
```

---

## ⚙️ 技术细节

### 自动定位原理

```bash
# 脚本开头自动设置
Ziwei_DIR="/home/admin/Ziwei"
cd "$Ziwei_DIR"

# 无论从哪里执行，都会切换到 Ziwei 目录
```

### 交互式输入原理

```bash
# 检查是否提供了参数
if [ -n "$1" ]; then
    # 使用命令行参数
    TASK_ID="$1"
    TASK_NAME="$2"
    TASK_DESC="$3"
else
    # 交互式输入
    read -p "任务 ID: " TASK_ID
    read -p "任务名称：" TASK_NAME
    read -p "任务描述：" TASK_DESC
fi
```

---

## 🔍 常见问题

### Q1: 必须在 Ziwei 目录执行吗？

**A**: ❌ **不需要！** 在任何目录执行都可以，脚本自动定位。

### Q2: 交互式输入可以跳过吗？

**A**: ✅ **可以！** 使用命令行参数模式：
```bash
bash scripts/run-task.sh TASK-XXX "名称" "描述"
```

### Q3: 任务描述必须输入吗？

**A**: ❌ **可选！** 直接回车跳过，使用默认描述。

### Q4: 输入错误怎么办？

**A**: 按 `Ctrl+C` 取消，重新运行脚本。

### Q5: 可以在 Windows/Mac 上使用吗？

**A**: 需要通过 SSH 连接到服务器执行。

---

## 📋 快速参考

### 交互式模式（推荐）

```bash
bash /home/admin/Ziwei/scripts/run-task.sh
# 按提示输入即可
```

### 命令行模式（快速）

```bash
bash scripts/run-task.sh TASK-日期 - 序号 "任务名称" "任务描述"
```

### 在任何目录执行

```bash
# 家里目录
~$ bash /home/admin/Ziwei/scripts/run-task.sh

# 临时目录
/tmp$ bash /home/admin/Ziwei/scripts/run-task.sh

# 任何位置都可以！
```

---

## 🎯 最佳实践

### 1. 新手使用交互式

```bash
bash /home/admin/Ziwei/scripts/run-task.sh
# 有提示，不容易出错
```

### 2. 老手使用命令行

```bash
bash scripts/run-task.sh TASK-XXX "名称" "描述"
# 快速高效
```

### 3. 批量操作写脚本

```bash
#!/bin/bash
bash scripts/run-task.sh TASK-001 "项目 1" "描述 1"
bash scripts/run-task.sh TASK-002 "项目 2" "描述 2"
bash scripts/run-task.sh TASK-003 "项目 3" "描述 3"
```

---

## 🔗 相关文档

- [[一键启动任务指南]] - 完整使用指南
- [[容错机制更新说明]] - 容错功能说明
- [[项目自动创建指南]] - 项目创建
- [[工作流程图]] - 完整工作流程

---

**无需切换目录，交互式输入，更简单、更人性化！** 🚀
