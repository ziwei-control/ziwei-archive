# 紫微智控 runtask 版本说明

> 当前版本：v1.0.0

---

## 📋 版本信息

| 项目 | 信息 |
|------|------|
| **版本号** | v1.0.0 |
| **发布日期** | 2026-02-28 |
| **代号** | 紫微智控 - 完整版 |
| **作者** | Martin |
| **许可证** | MIT |

---

## 🎯 功能特性

### 核心功能

- ✅ **8 步完整自动执行流程**
  1. 创建项目（GitHub + Gitee）
  2. 等待仓库准备
  3. 克隆项目到本地
  4. 创建任务文件
  5. 提交并推送到双平台
  6. T-01 任务分解
  7. 代码生成 + 审计 + 交付 + 邮件
  8. 设置自动归档（8 小时后）

- ✅ **GitHub + Gitee 双平台同步**
- ✅ **自动任务分解**（T-01 首席架构师）
- ✅ **自动代码生成**（T-02 代码特种兵）
- ✅ **自动审计交付**（T-03 代码审计员）
- ✅ **自动邮件通知**（通信官）
- ✅ **8 小时后自动归档**
- ✅ **Verbose 详细输出模式**

---

## 🚀 使用方法

### 基本命令

```bash
# 交互式模式
runtask

# 命令行模式
runtask TASK-XXX "名称" "描述"

# Verbose 模式（实时监控）
runtask -v TASK-XXX "名称" "描述"

# 显示版本
runtask --version

# 显示帮助
runtask --help
```

---

## 📊 版本历史

### v1.0.0 (2026-02-28) - 紫微智控 - 完整版

**新增功能**:
- ✅ 完整的 8 步自动执行流程
- ✅ GitHub + Gitee 双平台同步
- ✅ 自动任务分解（T-01）
- ✅ 自动代码生成（T-02）
- ✅ 自动审计交付（T-03）
- ✅ 自动邮件通知给康纳
- ✅ 8 小时后自动归档
- ✅ Verbose 详细输出模式（-v）
- ✅ 版本信息显示（--version）
- ✅ 帮助信息（--help）

**技术改进**:
- ✅ 容错机制（一个平台失败不阻塞）
- ✅ 自动重试失败同步
- ✅ 定时巡查（每 30 分钟）
- ✅ 定时重试（每 10 分钟）
- ✅ 强制同步（每日 23:40）
- ✅ SSH + Token 双重认证
- ✅ 全局命令（任何目录可用）
- ✅ 所有用户可用（root/普通用户）

**文档更新**:
- ✅ README.md（包含交付文件存储位置）
- ✅ 使用指南
- ✅ Verbose 模式说明
- ✅ 版本说明
- ✅ Gitee 配置指南
- ✅ 容错机制说明

---

## 🔧 系统要求

| 要求 | 说明 |
|------|------|
| **操作系统** | Linux (Alibaba Cloud Linux, CentOS, Ubuntu) |
| **Python** | 3.6+ |
| **Git** | 2.0+ |
| **Bash** | 4.0+ |
| **网络** | 需要访问 GitHub 和 Gitee |

---

## 📦 安装

### 自动安装（推荐）

```bash
sudo bash /home/admin/Ziwei/scripts/install-runtask.sh
```

### 手动安装

```bash
# 创建符号链接
sudo ln -sf /home/admin/Ziwei/scripts/run-task.sh /usr/local/bin/runtask
sudo chmod +x /usr/local/bin/runtask

# 配置权限
sudo chmod -R 755 /home/admin/Ziwei/scripts/
sudo chmod -R 777 /home/admin/Ziwei/data/
```

---

## 🗑️ 卸载

```bash
sudo bash /home/admin/Ziwei/scripts/uninstall-runtask.sh
```

---

## 📝 配置文件

### 环境变量

位置：`/home/admin/Ziwei/.env`

```bash
# 阿里百炼 API Key
BAILIAN_API_KEY="sk-sp-xxx"

# 邮件配置
EMAIL_PASSWORD="xxx"
SMTP_SERVER="smtp.163.com"
SMTP_PORT="465"
SENDER_EMAIL="pandac00@163.com"

# GitHub 配置
GITHUB_TOKEN="ghp_xxx"
GITHUB_REPO="git@github.com:ziwei-control/ziwei-archive.git"

# Gitee 配置
GITEE_REPO_SSH="git@gitee.com:pandac0/ziwei-archive.git"
GITEE_TOKEN="xxx"（可选，用于自动创建仓库）
```

---

## 📚 相关文档

- [使用指南](./一键启动任务指南.md)
- [Verbose 模式说明](./runtask-verbose 模式说明.md)
- [Gitee 配置指南](./Gitee 手动创建 runtask 仓库.md)
- [容错机制说明](./容错同步机制.md)
- [交互式启动说明](./交互式启动说明.md)

---

## 🐛 已知问题

无

---

## 🎯 未来计划

### v1.1.0 (计划中)

- [ ] 自动调用 AI API 执行任务
- [ ] 完整的工作流引擎
- [ ] 模型调度器
- [ ] 结果处理器
- [ ] 更多通知渠道（Telegram, Discord）

### v2.0.0 (长期计划)

- [ ] Web 界面
- [ ] 任务队列管理
- [ ] 多用户支持
- [ ] 任务模板系统
- [ ] 统计分析

---

## 📞 联系方式

- **作者**: Martin
- **邮箱**: pandac00@163.com
- **项目地址**: https://github.com/ziwei-control/ziwei-archive

---

## 📄 许可证

MIT License

---

**紫微智控 runtask v1.0.0 - 一个命令，自动完成所有步骤！** 🚀
