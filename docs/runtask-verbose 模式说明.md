# runtask --verbose 模式说明

> 实时监控任务执行状态，类似 `--verbose` 参数

---

## 🎯 功能说明

**--verbose 模式**（简称 `-v`）：实时显示任务执行的详细日志，包括：
- ✅ 每个步骤的开始/结束时间
- ✅ 执行的命令
- ✅ 调试信息
- ✅ 错误详情
- ✅ 性能统计

---

## 📋 使用方法

### 方式 1: 交互式 + verbose

```bash
runtask -v
```

**会提示输入任务信息，并显示详细日志**

---

### 方式 2: 命令行 + verbose

```bash
runtask -v TASK-20250228-003 "新任务" "任务描述"
```

**直接执行并显示详细日志**

---

### 方式 3: 普通模式（默认）

```bash
runtask TASK-20250228-003 "新任务" "任务描述"
```

**只显示关键步骤，简洁输出**

---

## 📊 输出对比

### 普通模式

```
╔════════════════════════════════════════════════════════╗
║          紫微智控 - 一键启动任务                       ║
╚════════════════════════════════════════════════════════╝

任务信息:
  ID: TASK-20250228-003
  名称：新任务

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[步骤 1/8] 创建项目（GitHub + Gitee）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✓ 步骤 1 完成：项目已创建
```

---

### Verbose 模式

```
╔════════════════════════════════════════════════════════╗
║          紫微智控 - 一键启动任务                       ║
╚════════════════════════════════════════════════════════╝

任务信息:
  ID: TASK-20250228-003
  名称：新任务
  [VERBOSE MODE] 已开启详细输出
  [START] 2026-02-28 02:15:00

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[步骤 1/8] 创建项目（GitHub + Gitee）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[INFO] 开始执行步骤 1/8: 创建项目（GitHub + Gitee）
[TIME] 2026-02-28 02:15:00
[DEBUG] 执行命令：bash scripts/create-project.sh TASK-20250228-003 新任务 任务描述

✓ 步骤 1 完成：项目已创建
[SUCCESS] 步骤 1 完成：项目已创建
[TIME] 耗时：2s
```

---

## 🔍 Verbose 模式输出内容

### 每个步骤显示

```
[INFO] 开始执行步骤 X/8: 步骤名称
[TIME] 开始时间：YYYY-MM-DD HH:MM:SS
[DEBUG] 执行的命令或操作
[SUCCESS] 步骤完成
[TIME] 耗时：Xs
```

---

### 错误信息

```
[ERROR] 错误描述
[TIME] 错误发生时间：YYYY-MM-DD HH:MM:SS
```

---

### 完成报告

```
[START] 2026-02-28 02:15:00
[END] 2026-02-28 02:20:00
总耗时：5 分钟
```

---

## 🎯 使用场景

### 场景 1: 调试问题

```bash
# 执行任务并查看详细日志
runtask -v TASK-XXX "任务" "描述"

# 可以看到：
# - 每个步骤执行了什么命令
# - 哪里出错了
# - 执行时间
```

---

### 场景 2: 监控长时间任务

```bash
# 实时监控任务进度
runtask -v TASK-XXX "大任务" "复杂描述"

# 可以看到：
# - 当前执行到哪个步骤
# - 每个步骤耗时
# - 剩余步骤预估时间
```

---

### 场景 3: 学习系统工作原理

```bash
# 查看系统如何工作
runtask -v

# 可以看到：
# - 完整的执行流程
# - 每个步骤的细节
# - 系统如何调用 API
```

---

## 📝 日志文件

**Verbose 模式的日志会保存到**:

```
/home/admin/Ziwei/data/logs/task_start_YYYYMMDD_HHMMSS.md
```

**查看最新日志**:

```bash
# 查看最新日志
ls -lt /home/admin/Ziwei/data/logs/task_start_*.md | head -1 | xargs cat

# 实时查看日志
tail -f /home/admin/Ziwei/data/logs/*.log
```

---

## 🔧 高级用法

### 组合使用

```bash
# 交互式 + verbose
runtask -v

# 命令行 + verbose
runtask -v TASK-XXX "名称" "描述"

# 查看帮助
runtask --help
```

---

### 环境变量

**永久开启 verbose 模式**:

```bash
# 在 ~/.bashrc 中添加
export ZIWEI_VERBOSE=true

# 重新加载
source ~/.bashrc

# 之后执行 runtask 都会显示详细日志
runtask TASK-XXX "名称" "描述"
```

---

## 📊 示例输出

### 完整 verbose 输出

```bash
$ runtask -v TASK-20250228-003 "计算器" "Python 计算器"

╔════════════════════════════════════════════════════════╗
║          紫微智控 - 一键启动任务                       ║
╚════════════════════════════════════════════════════════╝

任务信息:
  ID: TASK-20250228-003
  名称：计算器
  描述：Python 计算器
  [VERBOSE MODE] 已开启详细输出
  [START] 2026-02-28 02:15:00

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[步骤 1/8] 创建项目（GitHub + Gitee）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[INFO] 开始执行步骤 1/8: 创建项目（GitHub + Gitee）
[TIME] 2026-02-28 02:15:00
[DEBUG] 执行命令：bash scripts/create-project.sh TASK-20250228-003 计算器 Python 计算器

[项目创建输出...]

✓ 步骤 1 完成：项目已创建
[SUCCESS] 步骤 1 完成：项目已创建
[TIME] 耗时：2s

...（后续步骤）

╔════════════════════════════════════════════════════════╗
║              ✅ 任务启动完成！                         ║
╚════════════════════════════════════════════════════════╝

📦 任务信息:
  ID: TASK-20250228-003
  名称：计算器

📝 详细日志:
  # 查看系统状态
  cat /home/admin/Ziwei/data/system_status.md
  
  # 查看项目目录
  ls -la /home/admin/Ziwei/projects/TASK-20250228-003/
  
  # 查看日志
  tail -f /home/admin/Ziwei/data/logs/*.log
  
[END] 2026-02-28 02:20:00
```

---

## ✅ 总结

| 模式 | 命令 | 适用场景 |
|------|------|---------|
| **普通模式** | `runtask TASK-XXX "名称" "描述"` | 日常使用，简洁输出 |
| **Verbose 模式** | `runtask -v TASK-XXX "名称" "描述"` | 调试、监控、学习 |
| **交互式** | `runtask` | 不确定参数时 |
| **交互式 + verbose** | `runtask -v` | 交互式 + 详细日志 |

---

**使用 `runtask -v` 实时监控任务执行状态！** 🚀
